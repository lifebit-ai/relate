# lifebit-ai/relate: 

## Documentation

The lifebit-ai/relate documentation is split into the following files:

1. [Installation](https://nf-co.re/usage/installation)
2. Pipeline configuration
    * [Local installation](https://nf-co.re/usage/local_installation)
    * [Adding your own system config](https://nf-co.re/usage/adding_own_config)
    * [Reference genomes](https://nf-co.re/usage/reference_genomes)
3. [Running the pipeline](usage.md)
4. [Output and how to interpret the results](output.md)
5. [Troubleshooting](https://nf-co.re/usage/troubleshooting)

## Required input files

The following inputs and outputs requirements must considered for connecting the gcta process with the rest of pipeline:

INPUTS: 

-bfile 

WHERE DOES THIS BFILE SET COME FROM: The bfiles are internally generated by the pipeline as , these are "autosomes_LD_pruned_1kgp3Intersect_unrelate" bim, bed and fam files that come from the king_coefficients process as it is in its last version ( siteQC_funcs.sh ). 

WHAT FORMAT IT HAS: we use the files in the format generated by plink2 as generated by the king_coefficients process for each bim, bed and fam formats. 

HOW IT CONNECTS WITH THE REST OF THE RELATEDNESS PIPELINE:The autosomes_LD_pruned_1kgp3Intersect_unrelate bfiles are so far exclusively internal inputs and have no parameters for bringing them externally but that could be considered for future maintenance too if such external files are confirmed to be needed.

OTHER INPUTS : No other inputs are taking for this process.

OUTPUTS:  

"*. eigenvec ", " and " "*.PROJ.eigenvec " files
WHERE DOES THIS *.eigenvec SET GOES TO: The gcta outputs for *.eigenvec files and its complement "*.PROJ.eigenvec " (*.eigenvec file with NA's added as an additional last column) go into the infer_ancestry process that is run using the infer_ancestry.R script.

WHAT FORMAT IT HAS: we use the files in the format generated by gcta as generated by the gcta64 process from the Thanos code.

HOW IT CONNECTS WITH THE REST OF THE RELATEDNESS PIPELINE: The *.eigenvec file go exclusively to the infer_ancestry process and are affected only by the process in this step.

OTHER OUTPUTS: *.grm* files are also generated but not connected to any other process.


## Workflow visual overview (DAG)

![dag](https://github.com/lifebit-ai/relate/raw/salvador-add-ancestry-mvp/assets/relate_dag.png)
